using UnityEngine;
using System.Collections;

using MOJ.Helpers;

/// <summary>
/// If this is a component:
///     Retrieves Unity information and passes it to the abstract data type.
/// </summary>
public class AirDrawerMoverController : MonoBehaviour
{
	//////////////////////////////////////////////////////////////////////////////////////////
	#region Datatypes
	//////////////////////////////////////////////////////////////////////////////////////////


	#endregion
	//////////////////////////////////////////////////////////////////////////////////////////
	#region GameObjects
	//////////////////////////////////////////////////////////////////////////////////////////

	public MoverComponent m_moverComponent;

	#endregion
	//////////////////////////////////////////////////////////////////////////////////////////
	#region Constructors
	//////////////////////////////////////////////////////////////////////////////////////////

	#endregion
	//////////////////////////////////////////////////////////////////////////////////////////
	#region Attributes
	//////////////////////////////////////////////////////////////////////////////////////////

	private Mover m_runMover = null;

	#endregion
	//////////////////////////////////////////////////////////////////////////////////////////
	#region Accessors
	//////////////////////////////////////////////////////////////////////////////////////////

	#endregion
	//////////////////////////////////////////////////////////////////////////////////////////
	#region Methods
	//////////////////////////////////////////////////////////////////////////////////////////  

	#endregion
	//////////////////////////////////////////////////////////////////////////////////////////
	#region Runtime
	//////////////////////////////////////////////////////////////////////////////////////////  

	// Use this for initialization
	void Start()
	{
		if (m_moverComponent)
		{
			m_moverComponent.getActionMovers().TryGetValue(MoverComponent.ActionTypeFlag.Run, out m_runMover);
			m_moverComponent.activateMoverAction(MoverComponent.ActionTypeFlag.Run);
		}
	}

	// Update is called once per frame
	void Update()
	{
		ProcessInputs();
	}

	private void ProcessInputs()
	{
		float horizontalInput = Input.GetAxis("Horizontal");
		float depthInput = Input.GetAxis("Vertical");

		if (horizontalInput != 0 || depthInput != 0)
		{
			if (m_runMover != null)
			{
				m_moverComponent.getTransform().forward = new Vector3(horizontalInput, 0, depthInput);
			}
		}

		if (Input.GetButtonDown("Fire1"))
		{
			m_moverComponent.activateMoverAction(MoverComponent.ActionTypeFlag.Jump);
		}
	}

	#endregion
	//////////////////////////////////////////////////////////////////////////////////////////
	#region Persistence
	//////////////////////////////////////////////////////////////////////////////////////////

	#endregion
}