using UnityEngine;
using System;
using System.Collections;

/// <summary>
/// 
/// </summary>
public class AnimInputController : MonoBehaviour
{
	//////////////////////////////////////////////////////////////////////////////////////////
	#region GameObjects
	//////////////////////////////////////////////////////////////////////////////////////////

	public Transform m_characterTransform;
	public Animator m_animator;
	public string m_runSpeedParam;
	public string m_attackParam;

	public float m_moveDistanceScale;
	private Vector3 m_prevPosition;

	#endregion
	//////////////////////////////////////////////////////////////////////////////////////////
	#region  Constructors
	//////////////////////////////////////////////////////////////////////////////////////////

	#endregion
	//////////////////////////////////////////////////////////////////////////////////////////
	#region Interface Methods
	//////////////////////////////////////////////////////////////////////////////////////////

	#endregion
	//////////////////////////////////////////////////////////////////////////////////////////
	#region Accessors
	//////////////////////////////////////////////////////////////////////////////////////////  

	#endregion
	//////////////////////////////////////////////////////////////////////////////////////////
	#region Methods
	//////////////////////////////////////////////////////////////////////////////////////////

	#endregion
	//////////////////////////////////////////////////////////////////////////////////////////
	#region Runtime
	//////////////////////////////////////////////////////////////////////////////////////////

	void Start()
	{
		if(m_characterTransform)
		{
			m_prevPosition = m_characterTransform.position;
		}
    }

	// Update is called once per frame
	void Update()
	{
		if(m_animator != null)
		{
			ProcessInputs();
		}
	}

	private void ProcessInputs()
	{
		float runSpeed = 0;
        if (m_characterTransform)
		{
			Vector3 position = m_characterTransform.position;
			runSpeed = Vector3.Distance(position, m_prevPosition) * m_moveDistanceScale;
			m_prevPosition = position;
		}

		//float normalizedRunSpeed = velocity.normalized.x;
		m_animator.SetFloat(m_runSpeedParam, runSpeed);
		if(Input.GetButtonDown("Fire1"))
		{
			m_animator.SetBool(m_attackParam, true);
		}
    }

	#endregion
	//////////////////////////////////////////////////////////////////////////////////////////
	#region Persistence
	//////////////////////////////////////////////////////////////////////////////////////////

	#endregion
}